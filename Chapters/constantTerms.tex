This section is a discussion of the adelic constant term, especially its application to the Eisenstein series. 

Through constant terms we can define cusp forms which play a central role in the theory of automorphic forms. They appear historically as interesting examples such as the Ramanujan tau function, by a theorem of Ribet \cite[T2.3]{serreProceedingsInternationalConference1977} the Galois representation associated to a cusp form is irreducible and they form the ``base case'' for proofs, for example the spectral decomposition in \cite{moeglinSpectralDecompositionEisenstein1995}.

Constant terms preserve analytic properties whilst sometimes reducing the functions to more tractable forms..\label{constant_terms}


\section{Definition and Role} \label{cuspidal_form_definition}\label{sec:L-functions}
Consider \(P=MU\) a standard parabolic of a classical group \(G\) defined over a number field F and \(\phi: U(F)\setminus G(\A) \to \C\) a measurable and locally \(L^1\) function then its \textbf{constant term} along \(P\) is defined to be \cite[I.2.6]{moeglinSpectralDecompositionEisenstein1995},
\[\phi_P :  U(\A)\setminus G(\A) \to \C,\]
\[\phi_P(g) \defeq \int_{U(k)\setminus U(\A)}\phi(ug) \mathrm{d}u.\]

\todo{maybe put the classical setting in here, like how the Fourier coefficient is a constant term..}If \(\phi\) is smooth or moderate growth then so is its constant term \cite[I.2.6]{moeglinSpectralDecompositionEisenstein1995}. Moreover if \(\phi\) is an automorphic form on \(G(\A)\) then its constant term along \(P\) is an automorphic form on \(M(\A)\) \cite[6.5]{getzIntroductionAutomorphicRepresentations2024}.

Let \(\phi\) be an automorphic form on \(U(\A)M(k)\setminus G(\A)\) for \(P = MU\) a standard parabolic. Then \(\phi\) is \textbf{cuspidal} if for all standard parabolics \(P'\subset P\) we have that \(\phi_{P'}\) is identically zero. 

\begin{Theorem}[\cite{moeglinSpectralDecompositionEisenstein1995}, I.4.10]
		Let \(P = MU\) be a standard parabolic of \(G\). If \(\pi\) is a cuspidal automorphic representation induced from \(P\) (see section \ref{induced}), then for a fixed \(\phi \in\mathcal{A}_0(U(\A)M(k)\setminus G(\A))_\pi \) the Eisenstein series \(E\) can be thought of as a function from some open subset of the cuspidal datum \(\mathfrak{P}\), the orbit of \(\pi\) (see section \ref{orbits}), into \(L^2_{\mathrm{loc}}(G(\A))\) given by 
		\[E(p)(g) = \sum_{\gamma \in P(k)\backslash G(k)} \lambda.\phi(\gamma g), \;\;\; p\in \mathfrak{P},\; g\in G(\A),\]
		where it converges. 
		If \(D\subseteq \mathfrak{P}\), is an open subset minus a finite number of points on which \(E\) is holomorphic then E has a holomorphic continuation to the finite number of points if and only if the constant term of \(E_Q\) has a holomorphic continuation to these finite number of points for all standard parabolics \(Q\).
    \end{Theorem}
    
    \begin{remark}
    	The theorem in Moeglin and Waldspurger is proved in much more generality, however after sufficient symbol pushing this is the essence. 
    \end{remark}
    So one can say that the poles of an Eisenstein series are controlled by its constant terms. We can say more:
    
        
        \begin{theorem}[\cite{moeglinSpectralDecompositionEisenstein1995}, II.1.7]\label{thm:constant_terms}
        	The constant term of an Eisenstein series induced from a standard maximal parabolic \(P\) is zero along any other standard parabolic \(P'\) i.e. if \(P \neq P'\) then the constant term of the Eisenstein series along \(P'\) is zero.
        \end{theorem}
        
        Putting these two theorems together we see that for an Eisenstein series induced from a maximal parabolic \(P\), it has a holomorphic continuation around a point if and only if its constant term along \(P\) has a holomorphic continuation around that point. \label{const_lemma_3}
      
      

\section{Constant Terms of Eisenstein Series}\label{const_eisenstein}
This computation forms the heart of a well known theorem, \cite[Prop 10.4.2]{getzIntroductionAutomorphicRepresentations2024}\cite[II.1.7]{moeglinSpectralDecompositionEisenstein1995}\cite[6.2]{shahidiEisensteinSeriesAutomorphic2010}. Notice that the Eisenstein series has full \(G(F)\)-invariance and so we can take its constant terms along \textit{any} standard parabolic.

Also note that we assume the computations are taking place in the domain of \(\mathfrak{P}\) on which the Eisenstein series is given by the sum formula. By the uniqueness of meromorphic continuation taking constant terms commutes with meromorphic continuation.

\subsection{In General}
We will use the following Lemmas to give a simplified expression of the constant term of an Eisenstein series. Let G be a classical group over a number field F, fix a Borel \(B\) and fix \(P = MU\) and \(P' = M'U'\) two standard \textit{maximal} parabolics. Let \(E(x, \phi, \lambda)\) be defined from P as in section \ref{sec:eisenstein-series}.


If \(H\) is an algebraic group of the form \(H= G_1\times G_2\) where both \(G_1\) and \(G_2\) are classical in our sense then \(H\) is also split. Thus we can take any maximal split torus \(T\subseteq H\) and defined the \textbf{Weyl group} of \(H\)
\[W_H\defeq \mathrm{Norm}_{H(F)} T(F) /\mathrm{Cent}_{H(F)}T(F),\] 
\todo[inline]{hmmm but below I use the Weyl group of the Levi, not necissarily a classical group, might not be split so the same definition cannot work.}
where \(H(F)\) acts on \(T(F)\) by conjugation. Note that this is independent of the choice of Torus by \todo{ref}. Now as we have seen in section \todo{ref} the Levi subgroups of maximal parabolics of classical groups are of the form \(G_1\times G_2\) for \(G_i\) classical groups. Thus we know how to talk about the Weyl groups of Levis of maximal parabolics of classical groups.

\todo[inline]{need to move teh unfolding statement here now.}


	\begin{Lemma}\label{lem:1}
        \[P(F)\setminus G(F) \cong \coprod_{w\in W_{M'}\setminus W_G / W_{M}} P'(F)\cap wP(F)w\inv \setminus P'(F).\]
    \end{Lemma}
    \proofbar{
        Consider the Bruhat decomposition:
        \[G(F) =\coprod_{w\in W_{M'}\setminus W_G / W_{M}} P(F)w\inv P'(F) .\]
        Then because the action of \(P(F)\) keeps the disjoint sets disjoint we can move the quotient through and get
        \[P(F)\setminus G(F) = \coprod_w  P(F) \setminus P(F)w\inv P'(F).\]
        Analysing the summands, by the second isomorphism theorem we have a bijection
        \[P(F)\setminus P(F)w\inv P'(F) \cong P(F)\cap P'(F) \setminus w\inv P'(F). \]
        If \([w\inv p] \in P(F)\cap P'(F) \setminus w\inv P'(F) \) then its represented by some \(pw\inv p'\) where \(p\in P(F)\cap P'(F)\) and hence multiplying by \(w\), in particular an isomorphism, gives \(wpw\inv p'\in wP(F)w\inv \times P'(F)\) and so 
        \[w(P(F)\cap P'(F) \setminus w\inv P'(F)) \cong wP(F)w\inv \cap P'(F) \setminus P'(F).\]
    }\todo{this proof is incorrect. Didnt pay attention to left and right cosets. Also need to know that these actions are actually well defined, do they fix the sets that im talking about? }

    \begin{Lemma}\label{lem:2}
        Let \(m'\in M'(F),  u'\in U'(F)\) then 
        \[m'u' \in wP(F)w\inv \iff m'\in wP(F)w\inv \text{ and  }\;\; u'\in (m')\inv wP(F)w\inv m'.\]
    \end{Lemma}
    \proofbar{
        The forward implication is stated in \cite[Lem. 10.4.1]{getzIntroductionAutomorphicRepresentations2024}, the converse follows from some algebra:
        First let \(m' = wp_1w\inv\) and \(u' = (m')\inv wp_2w\inv m'\) then 
        \begin{equation*}
            \begin{aligned}
                m'u' &= (wp_1w\inv)\inv wp_2w\inv wp_1w\inv\\
                     &= wp_1\inv w\inv wp_2w\inv wp_1w\inv\\
                     &= wp_1\inv p_2p_1w\inv \in wP(F)w\inv.\\
            \end{aligned}
        \end{equation*}
    }
    Taking the contrapositive of this lemma will be used below. This is because our sums will be over quotients like \(A\setminus B\) and therefore summing over the ``elements'' in B that are not in A; by our lemma would be the same as summing over two different such quotients.
Now we will apply our lemmas to simplify and make more explicit the constant term of an Eisenstein series. Denote \([U']\defeq U'(F)\setminus U'(\A)\)
    \begin{equation*}
        \begin{aligned}
            E_{P'}( \phi, \lambda, x) &= \int_{U'(F)\setminus U'(\A)} E( \phi, \lambda, nx) du\\
                                     &= \int_{[U']} \sum_{\delta\in P(F)\setminus G(F)} \lambda.\phi(\delta nx)  du\\
                                    (\text{Lemma }\ref{lem:1}) \;\;\; &= \int_{[U']} \sum_{\delta\in \coprod_{w\in W_{M'}\setminus W_G / W_{M}} P'(F)\cap wP(F)w\inv \setminus P'(F)} \lambda.\phi(\delta ux)  du\\
                                     &= \sum_{ w\in W_{M'}\setminus W_G / W_{M}}\int_{[U']} \sum_{p'\in P'(F)\cap wP(F)w\inv \setminus P'(F)} \lambda.\phi( w\inv p'ux)  du.\\
        \end{aligned}
    \end{equation*}
    Now apply Lemma \ref{lem:2} to the above sum to see that it is equal to 
    \begin{align*}
    	&\sum_{ w} \sum_{m'\in M'(F)\cap wP(F)w\inv\setminus M'(F)} \int_{[U']} \sum_{u'\in U'(F)\cap (m')\inv wP(F)w\inv m' \setminus U'(F)} \lambda.\phi( w\inv m'u'ux)  du\\
    	&(\text{Change Var}) \;\;\; = \sum_{ w} \sum_{m'} \int_{[U']} \sum_{n'\in U'(F)\cap wP(F)w\inv\setminus U'(F) } \lambda.\phi( w\inv u'um'x)  du\\
    	&(\text{Unfold}) \;\;\;\;\;\;\;\;\;\;\; = \sum_{ w} \sum_{m'} \int_{U'(F)\cap wP(F)w\inv \setminus U'(\A)} \lambda.\phi( w\inv um' x)  du.\\
    \end{align*}

    The change of variables is \((m', u') \mapsto ((m')\inv u' m', (m')\inv u' m')\).

\subsection{Constant Terms of Cuspidal Eisenstein Series}
\begin{Lemma}[\cite{getzIntroductionAutomorphicRepresentations2024}, 10.4.1]\label{lem:4}
        There exists a set of representatives \(R\) for \( W_{M'}\setminus W_G / W_{M} \) such that for \(w\in R\) we have  \(w\inv P'w\cap M\) is a standard parabolic of \(M\) with Levi \(w\inv M'w\cap M\) and unipotent \(w\inv U'w\cap M\).
    \end{Lemma}\todo{need to make the root datum weyl group stuff explicit and then describe these representatives (maximal length ones)}
    \begin{Lemma}[\cite{getzIntroductionAutomorphicRepresentations2024}, 10.4.1]\label{lem:5}
    	For \(w\in R\) as above
        \[w\inv U' w \cap P = (w\inv U' w \cap M)(w\inv U' w \cap U).\]
    \end{Lemma}
    
    So if \(R\) is a set of representatives for \(W_{M'}\setminus W_G / W_{M}\) as given by lemma \ref{lem:4} we have seen so far that 
    \[ E_{P'}( \phi, \lambda, x) =\sum_{ w\in R} \sum_{m'\in M'(F)\cap wP(F)w\inv\setminus M'(F)} \int_{U'(F)\cap wP(F)w\inv \setminus U'(\A)} \lambda.\phi( w\inv um' x)  du. \]
    Continuing the computation of the constant term above, we will focus purely on the inner integral now
    \begin{equation*}
        \begin{aligned}
            \int_{U'(F)\cap wP(F)w\inv \setminus U'(\A)}& \lambda.\phi( w\inv um' x)  du \\&= \int_{w\inv U'(F)w \cap P(F) \setminus w\inv U'(\A)w} \lambda.\phi( uw\inv m' x)  du \\
            (\text{Lemma \ref{lem:5}})&= \int_{(w\inv U' w \cap M)(w\inv U' w \cap U)(F) \setminus w\inv U'(\A)w} \lambda.\phi( uw\inv m' x)  du . \\
        \end{aligned}
    \end{equation*}
    where the first equality is the change of variables \(w\inv u w\mapsto u \). Denote \(A = (w\inv U'(F) w \cap U(F) ) \setminus w\inv U'(\A)w \). Unfolding we get the equality
    \[= \int_{(w\inv U'(\A)w \cap M(\A)) \setminus A} \int_{w\inv U'(F) w \cap M(F) \setminus w\inv U'(\A)w \cap M(\A)} \lambda.\phi( u_1 u_2 w\inv m' x)  du_1 du_2.\]
     Now look at the inner integral here more closely 
    \[ \int_{w\inv U'(F) w \cap M(F) \setminus w\inv U'(\A)w \cap M(\A)}\lambda. \phi( u_1 u_2 w\inv m' x)  du_1 du_2,\]
    applying Lemma \ref{lem:4} we see that this is a constant term for a parabolic of \(M\), of the function \(m\mapsto \phi(m u_2 w\inv m' x)\). 
\begin{comment}
	    \begin{Lemma}
        \(u_2 w\inv m' x \in K\) with variables as above.
    \end{Lemma}
\end{comment}
    This was in complete generality. If we now assume further that the Eisenstein series was induced from a \textit{cuspidal} automorphic representation, then \(m\mapsto \phi(mk)\) is a cusp form and therefore this last integral will vanish whenever \(w\inv U'w \cap M \neq \{1\}\), because in that case the inner integral doesn't exist (its over a point).

    \subsection{Constant Term Of Eisenstein Series for Conjugate Levis}\label{constant_conjugate_levi}
    If we now assume that \(M' = wMw\inv\) for \(w\in W\) and recall the definition of our intertwining operator from section \ref{sec:eisenstein-series} we can use the following 
    \begin{Lemma}[\cite{moeglinSpectralDecompositionEisenstein1995} II.1.7 (6)]
        \[U'(k) \cap wP(k) w\inv = U'(k) \cap wU(k)w\inv,\]
    \end{Lemma}
    to see that 
    \begin{equation*}
        \begin{aligned}
             E_{P'}( \phi, \lambda, x) &= \sum_{ w} \sum_{m'} \int_{U'(F)\cap wP(F)w\inv \setminus U'(\A)} \lambda.\phi( w\inv um' x)  du \\
             &=  \sum_{ w} \sum_{m'} \int_{U'(k) \cap wU(k)w\inv \setminus U'(\A)} \lambda.\phi( w\inv um' x)  du \\
             &= \sum_{ w} \sum_{m'} M(w, \pi)(\lambda.\phi)(x).
        \end{aligned}
    \end{equation*}
    In particular we can combine the conjugate and cuspidal cases to get a much simpler expression for some constant terms of some Eisenstein series, we will go through a detailed example in the final chapter \ref{ch:jiang}.
    


    