The references that will be most helpful are \cite[I.II]{borelAutomorphicFormsRepresentations1979}\cite{getzIntroductionAutomorphicRepresentations2024} for the general theory, we will follow the notation developed in \cite{moeglinSpectralDecompositionEisenstein1995} as it is somewhat standard. We will discuss some of the details of their representation theory because it is both subtle and essential for the setup in \cite{jiangPolesCertainResidual2013}. In particular we want to draw attention some of the quirks of the category of automorphic representations. 

\section{Local Representation Theory}
Recall that in the representation theory of finite groups over \C there is really only one important representation, that is the regular representation i.e. the \(\C[G]\) module \(\C[G]\). This is important for two reasons, the first is that it is always a priori defined uniformly for all groups, the second is that it decomposes into a direct sum over all irreducible modules \cite[Ch. 2.4 Cor. 2 ]{LinearRepresentationsFinite}.

Let \(G\) be a classical group defined over a number field \(F\). 
As in the finite group case we want to consider the right regular action of the adelic points, \(G(\A)\), on a space of functions \(G(\A) \to \C\), namely
\[g.f(x) = f(xg).\]
One can ask if this representation sends an automorphic form to an automorphic form.
If \(\phi(x)\in \mathcal{A}(U(\A)M(F)\backslash G(\A))\) and \(g\in G(\A_f)\) then \(\phi(xg) \in \mathcal{A}(U(\A)M(F)\backslash G(\A)) \). Hence \(\mathcal{A}(U(\A)M(F)\backslash G(\A))\) is a \(G(\A_f)\)-module. In particular it is a module for \(G(F_\nu)\) for all \(\nu\) non-Archimedean

There is a problem with the \(K\)-finiteness in the infinite places however which prevents \( \mathcal{A}(U(\A)M(F)\backslash G(\A))\) from being a full \(G(\A)\) module.

\begin{example}[\cite{cogdellLecturesLfunctionsConverse}, 2.3]
    If \(\phi\in \mathcal{A}(\Gamma \backslash G(F_\infty))\) is \(K_\infty\)-finite, then \(g.\phi\) is \(gK_\infty g\inv\)-finite. This is still a maximal compact subgroup, however in the infinite place it will a priori have only the identity in common with the original \(K\).

    For example consider \(\SL_2\) where the maximal compact is \(SO_2\), if we conjugate we get \(gSO_2g\inv\)
    \begin{align*}
        \begin{pmatrix}
            a & b\\
            c & d
        \end{pmatrix}
        \begin{pmatrix}
            \cos\theta & -\sin\theta \\
            \sin\theta & \cos\theta
        \end{pmatrix}
        \begin{pmatrix}
            d & -b\\
            -c & a
        \end{pmatrix}  &=  \begin{pmatrix}
            \cos\theta + (db  + ca)\sin\theta & -\sin\theta( a^2+b^2)\\
            \sin\theta(d^2 + c^2) & \cos\theta - (b d  + ac)\sin\theta
        \end{pmatrix}.\\
    \end{align*}

    If we want to find the intersection of \(SO_2\) with \(gSO_2 g\inv\) we need to solve the system 
    \begin{align*}
        \begin{pmatrix}
            \cos\theta' & -\sin\theta' \\
            \sin\theta' & \cos\theta'
        \end{pmatrix}  &=  \begin{pmatrix}
            \cos\theta + (db  + ca)\sin\theta & -\sin\theta( a^2+b^2)\\
            \sin\theta(d^2 + c^2) & \cos\theta - (b d  + ac)\sin\theta
        \end{pmatrix}.\\
    \end{align*}
    Where \(\theta\) might not be \(\theta'\). If \(\theta = n\pi, n\in \Z\) then the \(\sin\) terms on the right vanish and we get the \(\pm 1\) as a point of intersection, so consider \(\theta\neq n\pi\). Then we require 
    \[\cos\theta' = \cos\theta - (b d  + ac)\sin\theta = \cos\theta + (db  + ca)\sin\theta,\]
    hence \(2(bd+ac)\sin\theta = 0\) and because \(\sin\theta\) was assumed to be non-zero this is the same as \(bd+ac = 0\). Thus for instance the element \(\begin{pmatrix} 1 & 1\\ & 1  \end{pmatrix}\) conjugates \(SO_2\) to another subgroup that has only trivial intersection. 

    Finally it is worth noting that this is not an issue at the finite places, namely if \(K = K_fK_\infty\) is our maximal compact subgroup of \(G(\A)\) then \(K_f\) is also open and hence \(K_f \cap gK_f g\inv\) is of finite index in both \(K_f\) and \(gK_f g\inv\) and so their notions of \(K\)-finiteness will agree. 
\end{example}

For this reason we will need to talk about \((\mathfrak{g}, K)\)-modules:

\begin{definition}[\cite{getzIntroductionAutomorphicRepresentations2024}, 4.4.6]
    Let \(G\) be a \textit{real} Lie group (for example the analytification of the real or complex points of our favourite reductive LAG) and \(K\) be a maximal compact subgroup of \(G\). Let \(\mathfrak{g}_\C\) be the complexification of the real Lie algebra of \(G\) and \(\mathfrak{k}\) the real Lie algebra of \(K\). 
    
    A \textbf{\((\mathfrak{g}, K)\)-module} is a complex vector space \(V\) with two representations 
    \[\tilde{\pi}: \mathfrak{g} \to End(V), \quad \pi: K\to \GL(V),\]
    satisfying the following axioms
    \begin{enumerate}
        \item \(V\) decomposes into a countable direct sum of finite dimensional \(K\) representations.
        \item The representations should be compatible: For all \(X \in \mathfrak{k}\) and \(v\in V\)
        \[\tilde{\pi}(X)(v) = \frac{\mathrm{d}}{\mathrm{d}t}\pi(e^{tX})(v)|_{t=0} = \lim_{t\to 0}\frac{\pi(e^{tX})(v) - v}{t}.\]
        In particular the right hand limit exists
        \item And compatible with the adjoint representation: For \(k\in K\) and \(X\in \mathfrak{g}\) 
         \[\pi(k)\tilde{\pi}(X) \pi(k\inv )(v) = \tilde{\pi}(Ad(k)(X))(v).\]
    \end{enumerate}
\end{definition}

\begin{remark}
    It is common to use the same symbol for both of these representations in the \((\mathfrak{g}, K)\)-module. It is also important to note that these are purely algebraic representations, there is no condition of continuity etc. 
\end{remark}

If \(\mathfrak{g}\) is the Lie algebra of \(G(F_\infty)\) and \(K_\infty\subseteq G(F_\infty)\) is a maximal compact subgroup in good position we can define a \((\mathfrak{g}, K_\infty)\)-module structure on the space of automorphic forms as follows. Recall that by definition we have that 
\[\mathcal{A}(U(\A)M(F)\backslash G(\A)) \subseteq C^\infty(G(\A_f)) \tensor C^\infty(G(F_\infty)).\]
If \(\phi_f\tensor \phi_\infty \in \mathcal{A}(U(\A)M(F)\backslash G(\A)) \) then \(K_\infty\) acts by 
\[k.(\phi_f\tensor \phi_\infty)(g) \defeq \phi_f(g) \tensor \phi_\infty(gk),\]
i.e. via the right regular representation on the archimedian component. The lie algebra of \(G(F_\infty)\) acts as we have previously defined in section \ref{lie_algebra_action} via
\[z.(\phi_f\tensor \phi_\infty)(g) = \phi_f(g)\tensor \Dif{}{t}\phi_\infty(ge^{tz})|_{t=0}.\] 

Lets check the three conditions. (2) is immediate from the definitions of the two representations and the fact that automorphic forms are smooth. 
\begin{Lemma}
	\(\mathcal{A}(U(\A)M(F)\backslash G(\A))\) decomposes into a countable direct sum of finite dimensional \(K_\infty\) representations. 
\end{Lemma}

\begin{Lemma}
	For all \(k\in K_\infty\) and \(X\in \mathfrak{g}\) we have that 
	\[\phi_f(g)\tensor \Dif{}{t}\phi_\infty(gk\inv e^{tX}k)|_{t=0} = \phi_f(g)\tensor \Dif{}{t}\phi_\infty(g\inv e^{tkXk\inv})|_{t=0} .\]
\end{Lemma}

\todo[inline, color=blue]{Is this right...}


\section{Automorphic Representations}
Recall that if \(A, B, C\) are all \(R\) modules and we have the inclusions of \(R\) modules \(C \subseteq B \subseteq A\) then we call \(B/C\) a subquotient of \(A\). We now think of \(\mathcal{A}(U(\A)M(F)\backslash G(\A))\) as being a \(G(\A_f)\times (\mathfrak{g}, K)\) module. An automorphic representation is then a subquotient of this representation.
\begin{remark}
    Some authors will require that representation is by definition an \textit{irreducible} subquotient.
\end{remark}
\begin{remark}
    We really need a set theoretic definition here. The quotient of these modules cannot be considered up to isomorphism of \((\mathfrak{g}, K)\)-modules but must be the classical set theoretic realisation of this object, defined as equivalence classes of elements of the module. This is to say if one were to think of the category of automorphic representations it is \textit{much smaller} than the category of \(G(\A_f)\times (\mathfrak{g}, K)\)-modules (in particular the cardinality of the category of automorphic representations is bounded, whilst there is a proper class of \(G(\A_f)\) -modules). The reason is that we will want to talk about the automorphic forms themselves, and consider their properties.
\end{remark}

\begin{remark}
    Automorphic representations can also be defined as representations of an algebra \(\mathcal{H}\), the global Hecke algebra. This is the approach in \cite[I.II(4.6)]{borelAutomorphicFormsRepresentations1979}, and can be a helpful perspective to simplify definitions. This is also a motivation behind why Harish-Chandras \((\mathfrak{g}, K)\)-modules are the ``right'' replacement for the regular representation. 
\end{remark}

\begin{example}
    It is very hard to really write down something explicit. One thing that we can do is take a modular form \(f\). Then we know how to associate a concrete automorphic form \(\tilde{f}\). To this (or any fixed automorphic form) we have an automorphic representation given by acting on this vector:
    \[\mathrm{span}_\C \Biggl\{\big(G(\A_f)\times (\mathfrak{g}, K)\big).\tilde{f}\Biggr\} \subseteq \mathcal{A}(U(\A)M(F)\backslash G(\A))\]
\end{example}

\subsection{Cuspidal Representations}
Recall that an automorphic form \(\phi\in \mathcal{A}(U(\A)M(F) \backslash G(\A))\) is called \textbf{cuspidal}  if all its constant terms vanish, see section \ref{cuspidal_form_definition} for more detail on constant terms.
The space of such automorphic forms is denoted \(\mathcal{A}_0(U(\A)M(F) \backslash G(\A))\). An automorphic representation is called \textbf{cuspidal} if it is an irreducible subquotient of \(\mathcal{A}_0(U(\A)M(F) \backslash G(\A))\).

\begin{remark}
    Again this is not as a \((\mathfrak{g}, K)\)-module.
\end{remark}

\subsection{Isotypic Components}\label{automorphic_isotypic_subspaces}
Following the convention of \cite[II.1]{moeglinSpectralDecompositionEisenstein1995} we make two cases:
Let \(\pi\) be an irreducible subquotient of the space \(\mathcal{A}(M(k) \backslash M(\A))\), that is \textit{not cuspidal}. Then we denote the \(\pi\) isotypic component of \(\mathcal{A}(M(k) \backslash M(\A))\) by \(\mathcal{A}(M(k) \backslash M(\A))_\pi\).

We will also need the space 
\begin{align*}
	&\mathcal{A}(U(\A)M(F) \backslash G(\A))_\pi \\ &\defeq \{\phi \in \mathcal{A}(U(\A)M(F) \backslash G(\A)) : \forall k\in K, \; \phi_k\in\mathcal{A}(M(k) \backslash M(\A))_\pi \}
\end{align*}
where \(\phi_k: M(\A) \to \C\) is given by \(\phi_k(x) = \phi(xk)\).

Now if \(\pi\) is cuspidal, we define \(\mathcal{A}(M(k) \backslash M(\A))_\pi\) to be the isotypic component of \(\pi\) in \(\mathcal{A}_0(M(k) \backslash M(\A))\) and similarly we have 
\begin{align*}
	&\mathcal{A}(U(\A)M(F) \backslash G(\A))_\pi \\
&\defeq \{\phi \in \mathcal{A}_0(U(\A)M(F) \backslash G(\A)) : \forall k\in K, \; \phi_k\in\mathcal{A}_0(M(k) \backslash M(\A))_{\pi} \}
\end{align*}

\begin{remark}
    We cannot simply take the isotypic components as \((\mathfrak{g}, K)\)-modules we need to take the isotypic components after explicitly restricting the spaces. This is to say again that the category of automorphic reps is very explicit. 
\end{remark}

The point is that we want the isotypic component corresponding to a cuspidal representation to be cuspidal, however this just might not be the case. 
Yamana in \cite[Rm. 7.12]{yamanaSiegelWeilFormulaQuaternionic2013} has a counter example when one allows unitary groups over division algebras (non-commutative fields). It could be interesting to investigate this example more closely to see if the example can be pulled back to a unitary group over a field. In \cite{yamanaSiegelWeilFormulaQuaternionic2013} there is an automorphic representation of the quarternionic unitary group constructed, \(\Pi(V)\), that appears in both the cuspidal and residual spectrum. By that Yamana means that up to isomorphism the representation can been seen in both residual and cuspidal spectrum. In particular if one were to take the component that is in the cuspidal spectrum and look at its isotypic component then the versions in the residual spectrum would also occur and hence by definition of residual spectrum would not be cuspidal.

If we restrict to the cases dealt with in for instance \cite{moeglinSpectralDecompositionEisenstein1995}, namely not dealing with quarternions, then we have been told that this is an open problem whether or not this restriction is superfluous. 